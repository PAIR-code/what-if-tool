<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Do we need additional share metadata included here? -->

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-46457317-11"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46457317-11');
</script>

    <title>How To - Find a Counterfactual</title>
    
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/assets/css/material.min.css">
    <link rel="stylesheet" href="/assets/css/material-components-web.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,500,500italic,700,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Manrope:400,400italic,500,500italic,700,700italic" rel="stylesheet" type="text/css">

    <!-- <link href='/assets/css/main.css' rel='stylesheet' type='text/css'> -->
    <link href='/assets/css/new.css' rel='stylesheet' type='text/css'>
    <link rel="icon" href="/assets/images/favicon.png" type="image/png"/>

  </head>

  <body>
    <div class="mdl-layout mdl-layout--no-desktop-drawer-button mdl-js-layout mdl-layout--fixed-header">
      
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
          <!-- Title -->
          <span class="mdl-layout__title"><a href="/">What-If Tool</a></span>
          <!-- Add spacer, to align navigation to the right -->
          <div class="mdl-layout-spacer"></div>
          <!-- Navigation. We hide it in small screens. -->
          <nav class="mdl-navigation mdl-layout--large-screen-only">
            <a class="mdl-navigation__link" href="/get-started/">GET STARTED</a>
            <a class="mdl-navigation__link" href="/learn/">LEARN</a>
            <a class="mdl-navigation__link" href="/explore/">EXPLORE</a>
            <a class="mdl-navigation__link" href="/faqs/">FAQs</a>
            <a class="mdl-navigation__link" href="https://groups.google.com/forum/#!forum/what-if-tool" target="-_blank">GET INVOLVED<img class="header-arrow" src="/assets/images/arrow-link-out.png"/></a>
            <a class="mdl-navigation__link" href="https://github.com/pair-code/what-if-tool" target="-_blank">GITHUB<img class="header-arrow" src="/assets/images/arrow-link-out.png"/></a>
          </nav>
        </div>
      </header>
      <div class="mdl-layout__drawer">
        <span class="mdl-layout__title"><a href="/">What-If Tool</a></span>
        <nav class="mdl-navigation">
          <a class="mdl-navigation__link" href="/get-started/">GET STARTED</a>
          <a class="mdl-navigation__link" href="/learn/">LEARN</a>
          <a class="mdl-navigation__link" href="/explore/">EXPLORE</a>
          <a class="mdl-navigation__link" href="/faqs/">FAQs</a>
          <a class="mdl-navigation__link" href="https://groups.google.com/forum/#!forum/what-if-tool" target="_blank">GET INVOLVED<img class="header-arrow" src="/assets/images/arrow-link-out.png"/></a>
          <a class="mdl-navigation__link" href="https://github.com/pair-code/what-if-tool" target="-_blank">GITHUB<img class="header-arrow" src="/assets/images/arrow-link-out.png"/></a>
          
          <!-- <a class="mdl-navigation__link" href="https://pair-code.github.io/facets/" target="-_blank">
            <i class="material-icons icon-style">star</i>
            <span>Facets</span>
          </a>
          <a class="mdl-navigation__link" href="https://js.tensorflow.org" target="-_blank">
            <i class="material-icons icon-style">star</i>
            <span>TensorFlow.js</span>
          </a> -->
        </nav>
      </div>
      
      <main class="mdl-layout__content hero-banner">
        <div class="tutorial-page-container mdl-grid">
          <div class="mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone">
            <div class="tutorial-breadcrumbs">
  <a href="/learn">Learn</a> > <a href="/learn/#basics">Basics of the What-If Tool</a> > Find a Counterfactual
</div>
            <h2>How To - Find a Counterfactual</h2>
<p>The datapoint editor is dedicated to a variety of datapoint-level analyses, and visualizes individual data points in the loaded data set. One such functionality is the ability to find counterfactuals for a selected datapoint. In the What-If Tool, a <em>Counterfactual</em> is the most similar datapoint of a different classification (for classification models) or of a difference in prediction greater than a specified threshold (for regression models).</p>
<ol>
<li>
<p>Select a data point of interest in the custom <em>Datapoints</em> visualization by clicking on it. A list of all features and values associated with that datapoint will appear in the Edit module.</p>
</li>
<li>
<p>In the <em>Visualize</em> module, turn on the counterfactual toggle by clicking on it:
a. In the custom <em>Datapoints</em> visualization, the nearest counterfactual datapoint will be highlighted.
b. In the <em>Edit</em> module, a list of feature values associated with the counterfactual will appear alongside the selected datapoint. Feature values that are different from the selected datapoint are displayed in green.
c. In the <em>Infer</em> module, the prediction values associated with the counterfactual are displayed alongside the selected datapoint.</p>
</li>
</ol>
<div class="mdl-cell mdl-cell--12-col mdl-cell--6-col-tablet mdl-cell--4-col-phone">
  <img class="tutorial-image" src="/assets/images/Counterfactuals.gif"/>
  <div class="tutorial-caption">Above: Find different counterfactuals to a selected data point by model and distance.</div>
</div>
<ol start="3">
<li>
<p><strong>Change the similarity metric</strong>  by selecting from the options provided.
a. You can select between L1 Norm distance and L2 Norm distance between data points. More information on how these distances are calculated will be included in a follow-on tutorial.
b. When using the What-If Tool in notebook mode,  you can provide a custom distance metric to calculate distance between datapoints. In that case, it will be used instead of L1/L2 Norm to find the closest counterfactual.</p>
</li>
<li>
<p><strong>Change the model used for prediction results</strong> for finding counterfactuals by selecting from the dropdown menu, if comparing multiple models.</p>
</li>
</ol>
<div class="mdl-cell mdl-cell--12-col mdl-cell--6-col-tablet mdl-cell--4-col-phone">
  <img class="tutorial-image" src="/assets/images/SimilarityFeature.gif"/>
  <div class="tutorial-caption">Above: Using the similarity modal to create a new similarity feature and use it in the Datapoints visualization.</div>
</div>
<ol start="5">
<li><strong>In regression models, change the threshold value</strong> using the counterfactual threshold slider. By default, the threshold for finding a counterfactual data point is set to the standard deviation of the prediction scores.</li>
</ol>
<div class="mdl-cell info-box mdl-cell--12-col mdl-cell--6-col-tablet mdl-cell--4-col-phone">
  <div class="info-box-title">Make a selected datapoint the center of your visualization</div>
  <div class="info-box-text">You can evaluate how similar all data points are to a given selection by creating a similarity feature. Click on the “Create similarity feature” to open a window. Here you can rename this feature, decide which distance type to use, and directly apply it to the <em>Datapoints</em> visualization. This feature is particularly useful when you want to find clusters of data points that are near a data point of interest. </div>
</div>

          </div>
          <div class="mdl-cell--4-col hide-me">
            <div class="tutorial-info-container">
              <div class="tutorial-info-header">time to read</div>
              <div class="tutorial-info-copy">7 minutes</div>
              <div class="tutorial-info-header">use with</div>
              <div class="tutorial-info-copy">Classification models<br/>Multi-class models<br/>Regression models</div>
              <div class="tutorial-info-header">before you begin</div>
              <div class="tutorial-info-copy">N/A</div>
              <div class="tutorial-info-header">related demos</div>
              <div class="tutorial-info-copy">Binary Classification Model: UCI Census Income Prediction<br/><br/>Multi-class Classification Model: Flowers Species Identification<br/><br/>Regression Model: UCI Census Age Prediction</div>
              <div class="tutorial-info-header">takeaways</div>
              <div class="tutorial-info-copy">Learn to find a counterfactual for a datapoint.<br/><br/>Configure metrics and models used when calculating counterfactuals.</div>
              <div class="tutorial-info-header">what-if questions</div>
              <div class="tutorial-info-copy">What needs to be different in a datapoint to be classified differently?<br/><br/>What differences between two data points cause models to behave differently?<br/><br/>Which two data points are most similar but have different classifications?</div>
            </div>
          </div>
          <div class="tutorial-footer mdl-cell--8-col mdl-cell--8-col-tablet mdl-cell--4-col-phone">
            The What-If Tool is being actively developed and documentation is likely to change as we improve the tool. We want to hear from you! Leave us a note, feedback, or suggestion on <a href="https://groups.google.com/forum/#!forum/what-if-tool" target="_blank">our community group</a>.
          </div>
        </div>

        <div class="footer-container mdl-grid">
  <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--4-col-phone"><a href="https://pair.withgoogle.com/" target="_blank"><img src="/assets/images/pair-logo.svg"/></a></div>
  <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--4-col-phone"><a href="https://research.google/teams/brain/pair/" target="_blank">Google Research</a></div>
  <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--4-col-phone"><a href="https://groups.google.com/forum/#!forum/what-if-tool" target="_blank">Get Involved</a></div>
  <div class="mdl-cell mdl-cell--2-col mdl-cell--2-col-tablet mdl-cell--4-col-phone"><a href="https://github.com/pair-code" target="_blank">Github</a></div>
  <div class="footer-icons mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--4-col-phone">
    <a href="mailto:peopleai@google.com" target="_blank"><img src="/assets/images/mail.png"/></a>
    <a href="https://medium.com/people-ai-research" target="_blank"><img src="/assets/images/medium.png"/></a>
    <a href="https://www.youtube.com/channel/UCnnns-uu4yy9BXfYSPIX5AA" target="_blank"><img src="/assets/images/youtube.png"/></a>
  </div>
</div>
      </main>

    </div>
  </body>

  

  <script defer src="/assets/js/material.min.js"></script>
  <script defer src="/assets/js/material-components-web.min.js"></script>
</html>
